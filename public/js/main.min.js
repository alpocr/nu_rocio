function onSmartCardChange(e){console.log("Datos?:",e),tempPid=e.tokenName,alert("TARJETA!")}function register(){window.crypto.enableSmartCardEvents=!0,document.addEventListener("smartcard-insert",onSmartCardChange,!1),document.addEventListener("smartcard-remove",onSmartCardChange,!1)}function deregister(){document.removeEventListener("smartcard-insert",onSmartCardChange,!1),document.removeEventListener("smartcard-remove",onSmartCardChange,!1)}function validate(){return crypto.version!==void 0&&(crmfObject=crypto.generateCRMFRequest("CN="+form.name.value,tempPid,authenticator,keyTransportCert,"setCRMFRequest();",1024,null,"rsa-dual-use")),!1}function setCRMFRequest(){form.cert_request.value=crmfObject.request,form.submit()}var authenticator="server_magic",keyTransportCert=null,crmfObject=null,form=document.forms[0],tempPid;form.onsubmit=validate,document.body.onload=register,document.body.onunload=deregister;
