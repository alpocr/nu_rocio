function initFirma(){window.crypto.enableSmartCardEvents=!0,document.addEventListener("smartcard-insert",cardIn,!1),document.addEventListener("smartcard-remove",cardOut,!1)}function terminateFirma(){document.removeEventListener("smartcard-insert",cardIn,!1),document.removeEventListener("smartcard-remove",cardOut,!1)}function cardIn(e){tempPid=e.tokenName,$("#loginFirma .alert").addClass("alert-success"),$("#loginFirma .alert").text("Su tarjeta est√° conectada correctamente. Puede continuar."),$("#loginFirma .btn").removeAttr("disabled")}function cardOut(){$("#loginFirma .alert").removeClass("alert-success"),$("#loginFirma .alert").text("Primero debe conectar su tarjeta para continuar."),$("#loginFirma .btn").attr({disabled:"disabled"})}function validate(){return crypto.version!==void 0&&(crmfObject=crypto.generateCRMFRequest("CN=ULATINA Componentes - Certificado Firma Digital",tempPid,authenticator,keyTransportCert,"setCRMFRequest();",1024,null,"rsa-dual-use")),!1}function setCRMFRequest(){"error:userCancel"!=crmfObject.request&&$("#cert").val(crmfObject.request)}var authenticator="server_magic",keyTransportCert=null,crmfObject=null,tempPid,form=document.forms[1];jQuery(document).ready(function(){}),jQuery(window).load(function(){initFirma(),$("#loginFirma .btn").click(validate)});
